(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(2),a=(n(17),n(15)),r=n.n(a),s=n(6),u=n(3),o=n(4),i=n.n(o),d="/api/persons",b={getAll:function(){return i.a.get(d).then((function(e){return e.data}))},create:function(e){return i.a.post(d,e).then((function(e){return e.data}))},update:function(e,t){return i.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))}},j=n(0),m=function(e){var t=e.contacts,n=e.searchTerm,c=e.deletePerson;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Numbers"}),t.filter((function(e){return e.name.toLowerCase().startsWith(n.toLowerCase())})).map((function(e){return Object(j.jsxs)("li",{children:[e.name," ",e.number," ",Object(j.jsx)("button",{onClick:function(){return c(e)},children:"delete"})]},e.name)}))]})},l=function(e){var t=e.addName,n=e.newName,c=e.setNewName,a=e.newNumber,r=e.setNewNumber;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Add a new"}),Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:n,onChange:function(e){return c(e.target.value)}})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:a,onChange:function(e){return r(e.target.value)}})]}),Object(j.jsx)("button",{type:"submit",children:"add"})]})]})},h=function(e){var t=e.searchTerm,n=e.setSearchTerm;return Object(j.jsxs)("div",{children:["filter shown with ",Object(j.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})},f=function(e){var t=e.notify,n=e.setNotify;return t.message?(setTimeout((function(){n({status:null,message:null})}),5e3),Object(j.jsx)("div",{className:t.status,children:t.message})):null},O=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),o=Object(u.a)(r,2),i=o[0],d=o[1],O=Object(c.useState)(""),v=Object(u.a)(O,2),p=v[0],x=v[1],w=Object(c.useState)([]),g=Object(u.a)(w,2),N=g[0],y=g[1],S=Object(c.useState)({status:null,message:null}),k=Object(u.a)(S,2),T=k[0],C=k[1];Object(c.useEffect)((function(){b.getAll().then((function(e){return y(e)}))}),[T]);return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Phonebook"}),Object(j.jsx)(f,{notify:T,setNotify:C}),Object(j.jsx)(h,{searchTerm:p,setSearchTerm:x}),Object(j.jsx)(l,{addName:function(e){e.preventDefault();var t=N.find((function(e){return e.name===n}));if(t)return window.confirm("".concat(t.name," is already added to the phonebook, replace the old number with a new one?"))&&b.update(t.id,Object(s.a)(Object(s.a)({},t),{},{number:i})).then((function(e){y(N.map((function(t){return t.name===n?e:t}))),C({status:"success",message:"".concat(t.name," has been updated!")})})).catch((function(e){console.log(e.message),C({status:"error",message:"".concat(t.name," has been deleted already.")})})),a(""),void d("");var c={name:n,number:i};b.create(c).then((function(e){y(N.concat(e)),C({status:"success",message:"Added ".concat(n," Successfully!")}),a(""),d("")}))},newName:n,setNewName:a,newNumber:i,setNewNumber:d}),Object(j.jsx)(m,{contacts:N,searchTerm:p,deletePerson:function(e){window.confirm("Delete ".concat(e.name))&&b.remove(e.id).then((function(t){y(N.filter((function(e){return e.id!==t.id}))),C({status:"error",message:"".concat(e.name," has been removed!")})}))}})]})};r.a.render(Object(j.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.1fb6532b.chunk.js.map